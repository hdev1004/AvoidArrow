<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" type="text/css" href="style.css">
    <audio controls autoplay id="myAudio">
        <source src="assets/The Dreamyard.mp3" type="audio/mpeg">
    </audio>
    
    <meta property="og:title" content="í™”ì‚´ í”¼í•˜ê¸° ê²Œì„">
    <meta property="og:type" content="website">
    <meta property="og:image" content="img/ì¸ë„¤ì¼.png">
    <meta property="og:description" content="í™”ì‚´ì„ í”¼í•´ ë†’ì€ ì ìˆ˜ë¥¼ íšë“í•˜ì„¸ìš”!">
    <title>í™”ì‚´ í”¼í•˜ê¸° ê²Œì„</title>
</head>
<body>
    <div id="score_board">
        <div id="_nickname" style="display: none;"></div>
        <div class="ranking">
            <div class="ranking_title">ë­í‚¹</div>
            <div class="ranking_row">
                <div id="ranking1">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div> 
                <div id="ranking1_score"></div>
            </div>
            <div class="ranking_row">
                <div id="ranking2">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div> 
                <div id="ranking2_score"></div>
            </div>
            <div class="ranking_row">
                <div id="ranking3">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div> 
                <div id="ranking3_score"></div>
            </div>
            <div class="ranking_row">
                <div id="ranking4">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div> 
                <div id="ranking4_score"></div>
            </div>
            <div class="ranking_row">
                <div id="ranking5">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div> 
                <div id="ranking5_score"></div>
            </div>
        </div>
        <div class="score_container">
            <div>
                <p>ì•—..!ğŸ¥¹ ì•„ì‰¬ì›Œìš”..</p>
                <div>í˜„ì¬ ì ìˆ˜ëŠ” <b id="score">50</b>ì  ì…ë‹ˆë‹¤ ğŸŒŸ</div>
            </div>
            <div onclick="restart()">ë‹¤ì‹œí•˜ê¸°</div>
            <div class="share_container"  onclick="share()">
                <div class="share_image">
                    <img src="./img/share.png"/>
                </div>
                <div class="share_title">ê³µìœ í•˜ê¸°</div>
            </div>
        </div>
    </div>
    <div id="nickname-container">
        <div class="nickname-modal">
            <div class="nickname_title">ë‹‰ë„¤ì„ ì…ë ¥</div>
            <input class="nickname" type="text" id="nickname" name="nickname" required placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”" >
            <button id="start-button" onclick="startGame()">ê²Œì„ ì‹œì‘</button>
        </div>
    </div>
    <canvas class="canvas" style="display:none;"></canvas>
    <div class="tutorial_hidden">
        <img class="show img1" src="/img/íŠœí† ë¦¬ì–¼1.png" onclick="imageClick(1)"/>
        <img class="show img2" src="/img/íŠœí† ë¦¬ì–¼2.png" onclick="imageClick(2)"/>
        <img class="show img3" src="/img/íŠœí† ë¦¬ì–¼3.png" onclick="imageClick(3)"/>
        <img class="show img4" src="/img/íŠœí† ë¦¬ì–¼4.png" onclick="imageClick(4)"/>
        <img class="show img5" src="/img/íŠœí† ë¦¬ì–¼5.png" onclick="imageClick(5)"/>
        <img class="show img6" src="/img/íŠœí† ë¦¬ì–¼6.png" onclick="imageClick(6)"/>
        <img class="show img7" src="/img/íŠœí† ë¦¬ì–¼7.png" onclick="imageClick(7)"/>
    </div>

    <script>
        function share() {
            alert("URLì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.")

        }
         document.addEventListener('click', function() {
            var audioElement = document.getElementById('myAudio');
            audioElement.volume = 0.1; // Volume set to 50%
            audioElement.play()
        });
    </script>
    <script type="module">
        import * as arrow from "./js/App.js";

        window.imageClick  = function(id) {
            const nickname = document.getElementById('nickname').value;
            document.querySelector(".img" + id).className = 'hidden';
            if(id === 7) {
                arrow.gameStart(nickname);
                setCookie("tutorial", true, 7); // 7ì¼ ë™ì•ˆ ìœ íš¨í•œ ì¿ í‚¤ ì„¤ì •
            }
            console.log("í´ë¦­");
        }

        function getCookie(name) {
            let cookieArr = document.cookie.split(";");
            for(let i = 0; i < cookieArr.length; i++) {
                let cookiePair = cookieArr[i].split("=");
                if(name == cookiePair[0].trim()) {
                    return decodeURIComponent(cookiePair[1]);
                }
            }
            return null;
        }

        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                let date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "")  + expires + "; path=/";
        }

        window.startGame = function() {
            // App.jsì˜ ê²Œì„ ì´ˆê¸°í™” í•¨ìˆ˜ í˜¸ì¶œ (ë‹‰ë„¤ì„ì„ ì¸ìë¡œ ì „ë‹¬)
            const nickname = document.getElementById('nickname').value;
            if (nickname.trim() !== '') {
                document.getElementById('nickname-container').style.display = 'none';
                document.querySelector('.canvas').style.display = 'block';
                document.querySelector("#_nickname").textContent = nickname;

                if(getCookie("tutorial")) {
                    arrow.gameStart(nickname);
                } else {
                    arrow.tutorial();

                }
                //arrow.gameStart(nickname);  // ë‹‰ë„¤ì„ì„ ì¸ìë¡œ ì „ë‹¬í•˜ì—¬ ê²Œì„ ì‹œì‘
            } else {
                alert('ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”.');
            }
        }

        window.restart = function() {
            // App.jsì˜ ê²Œì„ ì´ˆê¸°í™” í•¨ìˆ˜ í˜¸ì¶œ (ë‹‰ë„¤ì„ì„ ì¸ìë¡œ ì „ë‹¬)
            arrow.restart();
            // ì—¬ê¸°ì— arrowì˜ ì¬ì‹œì‘ í•¨ìˆ˜ í˜¸ì¶œ ì¶”ê°€
        }

    </script>
</body>
</html>
